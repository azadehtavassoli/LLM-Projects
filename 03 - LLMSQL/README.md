# Project Title:  
**SQL Server Integration with OpenAI for SQL Query Generation Using LLM**

---

## Project Description  
This project leverages large language models (LLM), such as GPT-4, to generate SQL queries based on natural language questions from users. It enables users to interact with a SQL database without the need for manual query writing. By simply asking questions in plain English, users receive a valid SQL query generated by the LLM, which is then executed on the database, returning the results.  

---

## Main Features  
- **Database Schema Extraction:** Retrieves the schema of the SQL database, including tables, columns, and data types, and provides it to the LLM.  
- **Schema Chunking:** Splits the database schema into smaller, manageable chunks due to token limitations in GPT-4.  
- **Natural Language to SQL Conversion:** Converts user questions into SQL queries using GPT-4 based on the provided schema.  
- **Query Execution and Result Display:** Executes the generated SQL query and displays the results to the user.  

---

## Project Structure  
### **Core Modules:**  
- **`execute_query:`** A function to execute SQL queries and return the results as a DataFrame.  
- **`split_schema_into_chunks:`** A function to split the database schema into smaller parts for efficient processing by GPT-4.  
- **`natural_to_sql:`** A function to send user questions and schema chunks to GPT-4 and retrieve SQL queries.  

### **Database:**  
- **SQL Server Database:** Utilizes the AdventureWorks2019 database as the example dataset.  

### **Large Language Model:**  
- **GPT-4:** Used to generate SQL queries based on natural language inputs.  

---

## Strengths of the Project  
- **Increased Efficiency:** Allows users to interact with the database without needing SQL knowledge, significantly speeding up query generation.  
- **Flexibility:** Supports complex queries tailored to the database schema and user input.  
- **Reduced Human Error:** Minimizes mistakes that may occur in manually written SQL queries.  
- **Scalability:** Extensible to various databases and new LLM models.  

---

## Challenges Addressed  
- **Token Limitations of GPT-4:**  
  Resolved by splitting the schema into smaller, manageable chunks.  
- **Cost of LLM Usage:**  
  Frequent API requests can be costly, requiring thoughtful implementation.  
- **Validation of Generated Queries:**  
  Ensures the accuracy and efficiency of the generated SQL queries.  

---

## Weaknesses of the Project  
- **Dependency on Internet:** Requires a stable internet connection to interact with OpenAI's API.  
- **Response Delay:** Query processing via OpenAI may experience delays.  
- **High Cost of Frequent API Calls:** Using LLMs for high-frequency queries can be expensive.  

---

## Advantages of LLM Over Traditional Query-Based Q&A  
- Traditional methods require deep SQL knowledge and familiarity with the database schema.  
- LLMs allow users to retrieve data by asking questions in natural language, saving time and effort.  
- LLMs support complex, context-aware questions that traditional systems often struggle with.  

---

## How to Use the Project  
1. Ensure the **AdventureWorks2019** database is installed and accessible.  
2. Place your **OpenAI API key** in a `.env` file.  
3. Run the code and input your question in natural language.  
4. The generated query and its execution result will be displayed.  
